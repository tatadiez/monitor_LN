<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Notas de Real Estate (La Nación) — Todas las páginas</title>
  <style>
    body { font-family: Arial; text-align: center; margin: 40px; }
    h1 { color: #000; }
    #resultado { font-size: 1.2em; color: blue; }
    ul { list-style: none; padding: 0; }
  </style>
</head>
<body>
  <h1>Notas de Real Estate (La Nación) — Todas las páginas</h1>
  <label>Desde: <input type="date" id="desde"></label>
  <label>Hasta: <input type="date" id="hasta"></label>
  <button id="contar">Contar notas</button>
  <p id="resultado">Total de notas encontradas: 0</p>
  <ul id="listado"></ul>

  <script>
    document.getElementById('contar').addEventListener('click', async () => {
      const desde = new Date(document.getElementById('desde').value);
      const hasta = new Date(document.getElementById('hasta').value);
      const proxy = "https://api.allorigins.win/raw?url=";
      let total = 0;
      let listado = [];

      for (let page = 1; page <= 10; page++) { // 10 páginas = ~200 notas
        const url = `https://www.lanacion.com.ar/arc/outboundfeeds/tema/real-estate-tid65306/?outputType=json&page=${page}`;
        const full = proxy + encodeURIComponent(url);
        try {
          const resp = await fetch(full);
          const data = await resp.json();
          if (!data.content_elements || data.content_elements.length === 0) break;

          data.content_elements.forEach(nota => {
            const fecha = new Date(nota.display_date);
            if (fecha >= desde && fecha <= hasta) {
              total++;
              listado.push(`<li>${nota.headlines.basic}</li>`);
            }
          });
        } catch (e) {
          console.error("Error al obtener página", page, e);
          break;
        }
      }
      document.getElementById('resultado').innerText = `Total de notas encontradas: ${total}`;
      document.getElementById('listado').innerHTML = listado.join('');
    });
  </script>
</body>
</html>
